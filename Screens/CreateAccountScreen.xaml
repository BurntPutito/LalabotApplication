<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="LalabotApplication.Screens.CreateAccountScreen"
             Title="CreateAccountScreen"
             NavigationPage.HasNavigationBar="False">

    <Grid RowDefinitions=".3*, .7*">
        <Image Aspect="AspectFill" Source="lalabot_background.png"/>
        <Grid BackgroundColor="#2D4A6E" Opacity=".5"/>

        <Grid ColumnDefinitions="*,*">
            <Image Margin="0,0,0,30"
                   Aspect="AspectFit"
                   HeightRequest="200"
                   Source="lalabot_logo_wlogobackground.png"
                   HorizontalOptions="Center"
                   VerticalOptions="Center"
                   Grid.ColumnSpan="2"/>
        </Grid>

        <!-- Login UI Background -->
        <Grid Grid.Row="1">
            <RoundRectangle Margin="-3, -30, -3, -2"
                            CornerRadius="35, 35, 0, 0"
                            Fill="White"/>

            <VerticalStackLayout Margin="30, 0, 30, 0" Spacing="8">
                <Label FontAttributes="Bold"
                       FontFamily="OutfitRegular"
                       FontSize="26"
                       Text="Create your account!"
                       TextColor="#2D2D2D"
                       Margin="0,0,0,10"/>

                <!-- =================== NAME FIELD =================== -->
                <VerticalStackLayout Spacing="2">
                    <Grid Margin="-10, 15, 0, 0" ColumnDefinitions=".2*, .8*">
                        <RoundRectangle BackgroundColor="AliceBlue"
                                        CornerRadius="10"
                                        HeightRequest="50"
                                        HorizontalOptions="Center"
                                        VerticalOptions="Center"
                                        WidthRequest="50"/>
                        <Image HorizontalOptions="Center">
                            <Image.Source>
                                <FontImageSource
                                    FontFamily="LineIcons"
                                    Glyph="&#xec2e;"
                                    Size="40"
                                    Color="#2D4A6E"/>
                            </Image.Source>
                        </Image>
                        <Entry x:Name="NameEntry"
                               Grid.Column="1"
                               Text="{Binding Username}"
                               FontFamily="OutfitLight"
                               FontSize="16"
                               Placeholder="Name"
                               VerticalOptions="Center"/>
                    </Grid>

                    <!-- Dynamic Hint -->
                    <Label Text="Avoid using vulgar or offensive words as your name."
                           FontFamily="OutfitLight"
                           FontSize="12"
                           TextColor="#6B7280"
                           Margin="35,2,0,0"
                           IsVisible="False">
                        <Label.Triggers>
                            <DataTrigger TargetType="Label"
                                         Binding="{Binding Source={x:Reference NameEntry}, Path=IsFocused}"
                                         Value="True">
                                <Setter Property="IsVisible" Value="True"/>
                            </DataTrigger>
                        </Label.Triggers>
                    </Label>
                </VerticalStackLayout>


                <!-- =================== EMAIL FIELD =================== -->
                <VerticalStackLayout Spacing="2">
                    <Grid Margin="-10, 5, 0, 0" ColumnDefinitions=".2*, .8*">
                        <RoundRectangle BackgroundColor="AliceBlue"
                                        CornerRadius="10"
                                        HeightRequest="50"
                                        HorizontalOptions="Center"
                                        VerticalOptions="Center"
                                        WidthRequest="50"/>
                        <Image HorizontalOptions="Center">
                            <Image.Source>
                                <FontImageSource
                                    FontFamily="LineIcons"
                                    Glyph="&#xeacd;"
                                    Size="40"
                                    Color="#2D4A6E"/>
                            </Image.Source>
                        </Image>
                        <Entry x:Name="EmailEntry"
                               Grid.Column="1"
                               Text="{Binding Email}"
                               FontFamily="OutfitLight"
                               FontSize="16"
                               Placeholder="Email"
                               VerticalOptions="Center"/>
                    </Grid>

                    <!-- Dynamic Hint -->
                    <Label Text="We recommend using your official Gmail address and email should end with .com or .ph or both."
                           FontFamily="OutfitLight"
                           FontSize="12"
                           TextColor="#6B7280"
                           Margin="35,2,0,0"
                           IsVisible="False">
                        <Label.Triggers>
                            <DataTrigger TargetType="Label"
                                         Binding="{Binding Source={x:Reference EmailEntry}, Path=IsFocused}"
                                         Value="True">
                                <Setter Property="IsVisible" Value="True"/>
                            </DataTrigger>
                        </Label.Triggers>
                    </Label>
                </VerticalStackLayout>


                <!-- =================== PASSWORD FIELD =================== -->
                <VerticalStackLayout Spacing="2" Margin="5, 0, 0, 0">
                    <Grid Margin="-10, 5, 0, 0" ColumnDefinitions=".2*, .8*, auto">
                        <RoundRectangle x:Name="PasswordIconBackground"
                                        BackgroundColor="AliceBlue"
                                        CornerRadius="10"
                                        HeightRequest="50"
                                        HorizontalOptions="Center"
                                        VerticalOptions="Center"
                                        WidthRequest="50"/>
                        <Image HorizontalOptions="Center">
                            <Image.Source>
                                <FontImageSource
                                    FontFamily="LineIcons"
                                    Glyph="&#xeb2f;"
                                    Size="40"
                                    Color="#2D4A6E"/>
                            </Image.Source>
                        </Image>

                        <Entry x:Name="PasswordEntry"
                               Margin="5, 0, 0, 0"
                               Grid.Column="1"
                               Text="{Binding Password}"
                               FontFamily="OutfitLight"
                               FontSize="16"
                               Placeholder="Password"
                               IsPassword="True"
                               VerticalOptions="Center"
                               Focused="PasswordEntry_Focused"
                               Unfocused="PasswordEntry_Unfocused"
                               TextChanged="OnPasswordTextChanged"/>        

                        <!-- Eye Icon Toggle -->
                        <ImageButton Grid.Column="2"
                                     VerticalOptions="Center"
                                     HorizontalOptions="End"
                                     BackgroundColor="Transparent"
                                     Padding="10"
                                     Clicked="TogglePasswordVisibility">
                            <ImageButton.Source>
                                <FileImageSource File="eye_big.png"/>
                            </ImageButton.Source>
                        </ImageButton>
                    </Grid>

                    <!-- Dynamic Hint -->
                    <Label Text="Use at least 12 characters with a mix of letters and numbers."
                           FontFamily="OutfitLight"
                           FontSize="12"
                           TextColor="#6B7280"
                           Margin="35,2,0,0"
                           IsVisible="False">
                        <Label.Triggers>
                            <DataTrigger TargetType="Label"
                                         Binding="{Binding Source={x:Reference PasswordEntry}, Path=IsFocused}"
                                         Value="True">
                                <Setter Property="IsVisible" Value="True"/>
                            </DataTrigger>
                        </Label.Triggers>
                    </Label>

                </VerticalStackLayout>


                <!-- Create account button -->
                <Button Margin="0, 20, 0, 0"
                        BackgroundColor="#2D4A6E"
                        HeightRequest="50"
                        Command="{Binding CreateAccountCommand}"
                        Text="Create Account"
                        FontFamily="OutfitRegular"
                        FontAttributes="Bold"
                        FontSize="16"
                        TextColor="#FBF6FD"/>

            </VerticalStackLayout>

            <Image Aspect="AspectFit"
                   Source="lalabot_delivery_logo.png"
                   VerticalOptions="End"
                   HorizontalOptions="Fill"
                   Margin="0, 0, 0, 0"/>
        </Grid>
    </Grid>
</ContentPage>
